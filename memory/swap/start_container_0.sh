#!/bin/bash
docker run -d --name mem_alloc registry/mem_alloc:v1
sleep 2
CONTAINER_ID=$(sudo docker ps --format "{{.ID}}\t{{.Names}}" | grep -i mem_alloc | awk '{print $1}')
echo $CONTAINER_ID
CGROUP_CONTAINER_PATH=$(find /sys/fs/cgroup/memory/ -name "*$CONTAINER_ID*")
echo $CGROUP_CONTAINER_PATH
echo 536870912 > $CGROUP_CONTAINER_PATH/memory.limit_in_bytes
echo 0 > $CGROUP_CONTAINER_PATH/memory.swappiness
echo "$CGROUP_CONTAINER_PATH/memory.swappiness"
cat  $CGROUP_CONTAINER_PATH/memory.swappiness
